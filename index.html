<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cotizador Pro M√≥vil</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --primary:#007BFF;
  --bg:#f2f4f8;
  --card:#ffffff;
  --text:#333;
}

body{
  margin:0;
  font-family:'Roboto',sans-serif;
  background:var(--bg);
  color:var(--text);
}

body.dark{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#eee;
}

.container{
  max-width:500px;
  margin:auto;
  padding:15px;
}

.card{
  background:var(--card);
  padding:18px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
}

h2{
  text-align:center;
  margin-top:0;
  color:var(--primary);
}

label{
  display:block;
  margin-top:12px;
  font-size:14px;
}

input{
  width:100%;
  padding:12px;
  margin-top:5px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:16px;
  box-sizing:border-box;
}

button{
  width:100%;
  padding:14px;
  margin-top:14px;
  border:none;
  border-radius:12px;
  background:var(--primary);
  color:white;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}

button:active{
  transform:scale(0.98);
}

.results{
  margin-top:18px;
  background:#eef2f7;
  padding:12px;
  border-radius:12px;
  font-size:14px;
}

body.dark .results{
  background:#2a2a2a;
}

.toggle{
  position:fixed;
  top:12px;
  right:12px;
  width:36px;
  height:36px;
  border-radius:50%;
  border:none;
  background:#444;
  color:white;
  font-size:18px;
}

.private{
  display:none;
  margin-top:20px;
  padding-top:10px;
  border-top:1px solid #ccc;
}

.mini{
  margin-top:15px;
  padding:12px;
  border-radius:12px;
  background:#f0f3f7;
}

body.dark .mini{
  background:#2a2a2a;
}

.mini button{
  margin-top:8px;
}
</style>
</head>

<body>

<button class="toggle" onclick="toggleTheme()">üåô</button>

<div class="container">
<div class="card">

<h2>Cotizador Profesional</h2>

<label>Cliente
<input type="text" id="client">
</label>

<label>Fecha
<input type="date" id="date">
</label>

<label>Producto
<input type="text" id="product">
</label>

<label>Precio $
<input type="number" id="price">
</label>

<label>Impuesto %
<input type="number" id="tax">
</label>

<button onclick="addItem()">Agregar</button>

<label>Env√≠o %
<input type="number" id="shipping">
</label>

<label>Inicial %
<input type="number" id="initial">
</label>

<label>Tasa BCV
<input type="number" id="bcv">
</label>

<button onclick="calculate()">Calcular</button>
<button onclick="downloadPDF()">Exportar PDF</button>

<div class="results" id="results">
Sin cotizaci√≥n.
</div>

<button onclick="togglePrivate()">Ajustes Privados</button>

<div class="private" id="private">

<div class="mini">
<h4>Mini Calculadora USD</h4>
<input type="number" id="n1" placeholder="N√∫mero 1">
<input type="number" id="n2" placeholder="N√∫mero 2">
<button onclick="calc('+')">‚ûï</button>
<button onclick="calc('-')">‚ûñ</button>
<button onclick="calc('*')">‚úñÔ∏è</button>
<p id="miniRes">Resultado: -</p>
</div>

<div class="mini">
<h4>Bs ‚Üí USD</h4>
<input type="number" id="b1" placeholder="Monto Bs 1">
<input type="number" id="b2" placeholder="Monto Bs 2">
<button onclick="calcBs('+')">‚ûï</button>
<button onclick="calcBs('-')">‚ûñ</button>
<button onclick="calcBs('*')">‚úñÔ∏è</button>
<p id="miniBsRes">Resultado: -</p>
</div>

</div>

</div>
</div>

<script>
let items=[];

function addItem(){
  const price=parseFloat(price.value)||0;
  const taxPercent=parseFloat(tax.value)||0;
  const total=price+(price*(taxPercent/100));
  items.push(total);
  results.innerHTML="Item agregado: $"+total.toFixed(2);
}

function calculate(){
  const totalItems=items.reduce((a,b)=>a+b,0);
  const ship=totalItems*((shipping.value||0)/100);
  const total=totalItems+ship;
  const init=total*((initial.value||0)/100);
  const remain=total-init;
  const rate=bcv.value||1;

  results.innerHTML=`
  Total: $${total.toFixed(2)}<br>
  Inicial: $${init.toFixed(2)}<br>
  Restante: $${remain.toFixed(2)}<br>
  Total Bs: ${(total*rate).toFixed(2)}
  `;
}

function togglePrivate(){
  private.style.display=
  private.style.display==="block"?"none":"block";
}

function calc(op){
  let a=parseFloat(n1.value)||0;
  let b=parseFloat(n2.value)||0;
  let r=0;
  if(op==='+')r=a+b;
  if(op==='-')r=a-b;
  if(op==='*')r=a*b;
  miniRes.innerText="Resultado: "+r.toFixed(2)+" USD";
}

function calcBs(op){
  let a=parseFloat(b1.value)||0;
  let b=parseFloat(b2.value)||0;
  let r=0;
  if(op==='+')r=a+b;
  if(op==='-')r=a-b;
  if(op==='*')r=a*b;
  miniBsRes.innerText="Resultado: "+r.toFixed(2)+" Bs ‚Üí "+(r/(bcv.value||1)).toFixed(2)+" USD";
}

function toggleTheme(){
  document.body.classList.toggle("dark");
  document.querySelector(".toggle").innerText=
  document.body.classList.contains("dark")?"‚òÄÔ∏è":"üåô";
}

function downloadPDF(){
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF();
  doc.text(results.innerText,10,10);
  doc.save("cotizacion.pdf");
}
</script>

</body>
</html>
