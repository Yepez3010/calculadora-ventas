<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cotizador Profesional M√≥vil</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --primary:#007BFF;
  --secondary:#6c757d;
  --card-bg:#fff;
  --text-color:#333;
  --input-bg:#fff;
  --input-text:#333;
  --calc-bg:#e2e8f0;
  --result-bg:#f1f5f9;
  --result-text:#333;
}

body{
  font-family:'Roboto',sans-serif;
  background:linear-gradient(135deg,#f0f2f5,#c9d6ff);
  color:var(--text-color);
  padding:20px;
  transition:all 0.4s ease;
}

body.dark-mode{
  --card-bg:#1e1e1e;
  --text-color:#eee;
  --input-bg:#2b2b2b;
  --input-text:#fff;
  --calc-bg:#2a2a2a;
  --result-bg:#1e1e1e;
  --result-text:#eee;
  background:linear-gradient(135deg,#121212,#1a1a1a);
}

.calculator{
  background:linear-gradient(145deg,#ffffff,#e6f0ff);
  padding:20px;
  border-radius:15px;
  box-shadow:0 15px 35px rgba(0,0,0,0.25);
  width:100%;
  max-width:500px;
  margin:0 auto;
  position:relative;
}

body.dark-mode .calculator{
  background:linear-gradient(145deg,#1e1e1e,#2a2a2a);
}

h2{text-align:center;color:var(--primary);}

label{display:block;margin-top:10px;}

input{
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:8px;
  border:1px solid #ccc;
  background:var(--input-bg);
  color:var(--input-text);
  box-sizing:border-box;
}

.btn{
  margin-top:15px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:8px;
  background:linear-gradient(135deg,#007BFF,#0056b3);
  color:#fff;
  cursor:pointer;
  transition:0.3s;
}

.btn:hover{transform:translateY(-2px);}

.results{
  margin-top:20px;
  background:var(--result-bg);
  color:var(--result-text);
  padding:15px;
  border-radius:10px;
}

.private-settings{
  margin-top:20px;
  padding:15px;
  background:var(--calc-bg);
  border-radius:12px;
  display:none;
}

.private-grid{
  display:flex;
  gap:10px;
}

.private-card{
  flex:1;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
}

.mini-btn{
  width:100%;
  margin-top:8px;
  padding:8px;
  border:none;
  border-radius:8px;
  background:#007BFF;
  color:#fff;
  cursor:pointer;
}

.toggle-theme{
  position:fixed;
  top:14px;
  right:14px;
  width:38px;
  height:38px;
  border-radius:50%;
  border:none;
  font-size:18px;
  cursor:pointer;
  background:#6c757d;
  color:#fff;
}

@media (max-width:600px){
  .private-grid{flex-direction:column;}
}
</style>
</head>

<body>

<button class="toggle-theme" id="themeToggle">üåô</button>

<div class="calculator">

<h2>Cotizador Profesional</h2>

<label>Nombre del Cliente:
<input type="text" id="clientName">
</label>

<label>Fecha:
<input type="date" id="date">
</label>

<label>Marca:
<input type="text" id="brandName">
</label>

<hr>

<label>Producto:
<input type="text" id="itemName">
</label>

<label>Cantidad (informativa):
<input type="number" id="itemQuantity">
</label>

<label>Precio ($):
<input type="number" id="itemPrice">
</label>

<label>Impuesto (%):
<input type="number" id="tax">
</label>

<button class="btn" onclick="addItem()">Agregar Item</button>

<hr>

<label>Env√≠o (%):
<input type="number" id="shippingPercent">
</label>

<label>Inicial (%):
<input type="number" id="initialPercent">
</label>

<label>Tasa BCV:
<input type="number" id="bcvRate">
</label>

<button class="btn" onclick="calculateTotal()">Calcular Total</button>
<button class="btn" onclick="exportPDF()">Exportar PDF</button>

<div class="results" id="results">
<p>No hay cotizaci√≥n a√∫n.</p>
</div>

<button class="btn" onclick="togglePrivate()">Ajustes Privados</button>

<div class="private-settings" id="privateSettings">

<h3>Mini Calculadoras</h3>

<div class="private-grid">

<div class="private-card">
<h4>USD</h4>
<input type="number" id="num1" placeholder="N√∫mero 1">
<input type="number" id="num2" placeholder="N√∫mero 2">
<button class="mini-btn" onclick="calcUSD('+')">‚ûï</button>
<button class="mini-btn" onclick="calcUSD('-')">‚ûñ</button>
<button class="mini-btn" onclick="calcUSD('*')">‚úñÔ∏è</button>
<p id="resUSD">Resultado: -</p>
</div>

<div class="private-card">
<h4>Bs ‚Üí USD</h4>
<input type="number" id="numBs1" placeholder="Monto Bs 1">
<input type="number" id="numBs2" placeholder="Monto Bs 2">
<button class="mini-btn" onclick="calcBs('+')">‚ûï</button>
<button class="mini-btn" onclick="calcBs('-')">‚ûñ</button>
<button class="mini-btn" onclick="calcBs('*')">‚úñÔ∏è</button>
<p id="resBs">Resultado: -</p>
</div>

</div>
</div>
</div>

<script>
const items=[];

function addItem(){
  const name=itemName.value;
  const quantity=itemQuantity.value;
  const price=parseFloat(itemPrice.value);
  const taxPercent=parseFloat(tax.value)||0;

  if(!name||isNaN(price)){alert("Completa el item");return;}

  const taxAmount=price*(taxPercent/100);
  const total=price+taxAmount;

  items.push({name,quantity,price,taxAmount,total});
  results.innerHTML+="<p>"+name+" - $"+total.toFixed(2)+"</p>";
}

function calculateTotal(){
  const shippingPercent=parseFloat(shippingPercent.value)||0;
  const initialPercent=parseFloat(initialPercent.value)||0;
  const bcv=parseFloat(bcvRate.value)||1;

  const totalItems=items.reduce((sum,it)=>sum+it.total,0);
  const shipping=totalItems*(shippingPercent/100);
  const total=totalItems+shipping;
  const initial=total*(initialPercent/100);
  const remaining=total-initial;

  results.innerHTML+=`
  <hr>
  <p>Total: $${total.toFixed(2)}</p>
  <p>Inicial: $${initial.toFixed(2)}</p>
  <p>Restante: $${remaining.toFixed(2)}</p>
  <p>Total Bs: ${(total*bcv).toFixed(2)}</p>`;
}

function togglePrivate(){
  privateSettings.style.display=
  privateSettings.style.display==="block"?"none":"block";
}

function calcUSD(op){
  const n1=parseFloat(num1.value)||0;
  const n2=parseFloat(num2.value)||0;
  let r=0;
  if(op==='+')r=n1+n2;
  if(op==='-')r=n1-n2;
  if(op==='*')r=n1*n2;
  resUSD.innerText="Resultado: "+r.toFixed(2)+" USD";
}

function calcBs(op){
  const n1=parseFloat(numBs1.value)||0;
  const n2=parseFloat(numBs2.value)||0;
  const bcv=parseFloat(bcvRate.value)||1;
  let r=0;
  if(op==='+')r=n1+n2;
  if(op==='-')r=n1-n2;
  if(op==='*')r=n1*n2;
  resBs.innerText="Resultado: "+r.toFixed(2)+" Bs ‚Üí "+(r/bcv).toFixed(2)+" USD";
}

function exportPDF(){
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF();
  doc.text(results.innerText,10,10);
  doc.save("cotizacion.pdf");
}

themeToggle.onclick=()=>{
  document.body.classList.toggle("dark-mode");
  themeToggle.innerText=
  document.body.classList.contains("dark-mode")?"‚òÄÔ∏è":"üåô";
};
</script>

</body>
</html>
